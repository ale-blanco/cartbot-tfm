!function(t){function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}var e={};a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},a.p="/build/",a(a.s="oy8l")}({"1uw4":function(t,a,e){var n=e("kvOd");t.exports.loadDonuts=function(t,a){var e=[],r=[];for(var o in a)a.hasOwnProperty(o)&&(e.push(o),r.push(a[o]));var i={type:"doughnut",data:{datasets:[{data:r,backgroundColor:n.list}],labels:e},options:{responsive:!0,legend:{position:"top"},title:{display:!1},animation:{animateScale:!0,animateRotate:!0}}},s=document.getElementById(t).getContext("2d");new Chart(s,i)}},DC8j:function(t,a,e){function n(t){var a=!0;return t.password||(r("password"),a=!1),t.newPassword||(r("newPassword"),a=!1),t.repeatPassword||(r("repeatPassword"),a=!1),a&&t.newPassword!==t.repeatPassword&&(r("newPassword","Las contraseñas no son iguales"),r("repeatPassword","Las contraseñas no son iguales"),a=!1),a}function r(t,a){a=a||"Debe indicar un valor";var e=$("#"+t);e.addClass(i),e.parent().find("."+s).html(a)}function o(t){var a=$("#"+t);a.removeClass(i),a.parent().find("."+s).html("")}var i="is-invalid",s="invalid-feedback",d=e("y+f2");t.exports=function(t,a){$("#"+t).click(function(){var e={};if($("#"+t).prop("disabled",!0),$("#"+a).serializeArray().forEach(function(t){e[t.name]=t.value}),$("#changePassOK").addClass("d-none"),o("password"),o("newPassword"),o("repeatPassword"),!n(e))return void $("#"+t).prop("disabled",!1);d.put("/a/ax/changepass/",e,function(e){if($("#"+t).prop("disabled",!1),e&&"ok"===e.ok)return $("#"+a)[0].reset(),void $("#changePassOK").removeClass("d-none");r("password","Error al guardar los datos")},function(a){if($("#"+t).prop("disabled",!1),400!==a.status)r("password","Error al guardar los datos");else for(var e in a.responseJSON)r(e,a.responseJSON[e])})})}},EIX4:function(t,a,e){var n=e("y+f2"),r=e("1uw4"),o=e("GNlR"),i=e("Uu5b");t.exports=function(){n.get("/a/ax/lastevents/",function(t){r.loadDonuts("chartByType",t.byType),o.loadBars("chartByHours",t.byHour,t.labels)},function(){}),n.get("/a/ax/lastseven/",function(t){i.loadLines("chartProducts",t.added)},function(){})}},GNlR:function(t,a,e){var n=e("kvOd");t.exports.loadBars=function(t,a,e){var r=[],o=[];for(var i in a)a.hasOwnProperty(i)&&(r.push(i),e.forEach(function(t,e){o[e]||(o[e]={label:t,backgroundColor:n.list[e],data:[]}),o[e].data.push(a[i][t]||0)}));var s={type:"bar",data:{labels:r,datasets:o},options:{responsive:!0,legend:{position:"top"},title:{display:!1},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]},animation:{animateScale:!0,animateRotate:!0}}},d=document.getElementById(t).getContext("2d");new Chart(d,s)}},JOCW:function(t,a){function e(){$("#"+i+" .tableHead i").each(function(t,a){$(a).remove()}),$("#"+i+" .tableHead").each(function(t,a){var e=$(a);if(e.data(u)===o){var n=r===d?"down":"up";e.append('<i class="fa fa-arrow-'+n+'"></i>')}})}function n(){$("#"+i+" .tableHead").each(function(t,a){$(a).click(function(){var t=$(this).data(u);o!==t?(o=t,r="+"):r=r===d?l:d,e(),s()})})}var r,o,i,s,d="+",l="-",u="orderkey";t.exports.initOrder=function(t,a,d){r=a.substr(0,1),i=t,o=a.substr(1),s=d,e(),n()},t.exports.getOrder=function(){return r+o}},Uu5b:function(t,a,e){var n=e("kvOd");t.exports.loadLines=function(t,a){var e=[],r=[];for(var o in a)a.hasOwnProperty(o)&&(e.push(o),r.push(a[o]));var i={type:"line",data:{datasets:[{label:"Productos añadidos",data:r,backgroundColor:n.list[0],fill:!1}],labels:e},options:{responsive:!0,title:{display:!1}}},s=document.getElementById(t).getContext("2d");new Chart(s,i)}},Z34z:function(t,a){var e;t.exports.initPagination=function(t){e=1,$(".page-item").click(function(a){if(!$(a.target).hasClass("disabled")){var n=$(this).data("page");n<1||(e=n,t())}})},t.exports.updatePagination=function(t){var a=window.cartBot.CONST.itemByPage;$(".page-item").each(function(n,r){var o=$(r),i=o.hasClass("isNumeric"),s=o.data("toadd"),d=e+s;i&&d<n&&(d=n),o.removeClass("active"),o.removeClass("disabled"),o.data("page",d),i&&$(o[0].children[0]).html(d),d===e&&o.addClass("active"),(d<1||(d-1)*a>t)&&o.addClass("disabled")});var n=(e-1)*a;$("#startRow").html(n+1);var r=n+a;$("#endRow").html(r>t?t:r)},t.exports.getPage=function(){return e},t.exports.setPage=function(t){e=t}},b7J3:function(t,a,e){var n=e("y+f2"),r=e("Z34z"),o=e("JOCW"),i=e("nxM7");t.exports=function(){function t(){$("#bodyTable").html(""),$("#loader").show();var t=$("form").serialize();t+="&"+$.param({page:r.getPage(),order:o.getOrder()}),t+="&"+$.param(i.getFilters()),n.get("/a/ax/findEvents/?"+t,function(t){$("#loader").hide(),t&&t.listEvents&&(a(t.listEvents),$("#totalRows").html(t.total),r.updatePagination(t.total))},function(){$("#loader").hide()})}function a(t){$("#bodyTable").html(""),t.forEach(function(t){var a=document.createElement("tr");a.appendChild(e(t.date)),a.appendChild(e(t.user)),a.appendChild(e(t.chat)),a.appendChild(e(t.type)),a.appendChild(e(t.data)),$("#bodyTable").append(a)})}function e(t){var a=document.createElement("td");return a.innerText=t,a}$("#dateStart").datetimepicker({format:"DD/MM/YYYY",defaultDate:new Date}),$("#dateEnd").datetimepicker({format:"DD/MM/YYYY",defaultDate:new Date}),$("#findEvents").click(function(){r.setPage(1),t()}),r.initPagination(function(){t()}),o.initOrder("tableData","+date",function(){r.setPage(1),t()}),i.initFilter("tableData",function(){t()})}},kscw:function(t,a){},kvOd:function(t,a){t.exports.list=["rgb(230, 25, 75)","rgb(60, 180, 75)","rgb(255, 225, 25)","rgb(0, 130, 200)","rgb(245, 130, 48)","rgb(145, 30, 180)","rgb(70, 240, 240)","rgb(240, 50, 230)","rgb(210, 245, 60)","rgb(250, 190, 190)","rgb(0, 128, 128)","rgb(230, 190, 255)","rgb(170, 110, 40)","rgb(255, 250, 200)","rgb(128, 0, 0)","rgb(170, 255, 195)","rgb(128, 128, 0)","rgb(255, 215, 180)","rgb(0, 0, 128)","rgb(128, 128, 128)","rgb(255, 255, 255)","rgb(0, 0, 0)"]},nxM7:function(t,a){function e(){return JSON.stringify(t.exports.getFilters())}function n(){var t;$("#"+r.idTable+" .tableFilter input").keyup(function(){r.lastFilters!==e()&&(t&&clearTimeout(t),t=setTimeout(function(){r.lastFilters=e(),r.callBack()},400))})}var r={idTable:null,callBack:null,lastFilters:""};t.exports.initFilter=function(t,a){r.idTable=t,r.callBack=a,n()},t.exports.getFilters=function(){return $("#"+r.idTable+" .tableFilter input").toArray().reduce(function(t,a){var e=$(a)[0];return t[e.name]=e.value,t},{})}},oy8l:function(t,a,e){e("kscw"),window.cartBot={CONST:{},dashboardInit:e("EIX4"),listEvents:e("b7J3"),changePass:e("DC8j")}},"y+f2":function(t,a){t.exports.get=function(t,a,e){$.get(t,a).fail(e)},t.exports.put=function(t,a,e,n){$.ajax({url:t,type:"PUT",success:e,data:a}).fail(n)}}});